---
title: Configuring
type: Docs
---

# Configuring

## Getting started

There are options you can use to customize the behavior of this plugin:

```js
// title next.config.js
const withPWA = require("@ducanh2912/next-pwa").default({
  dest: "public",
  // disable: process.env.NODE_ENV === "development",
  // register: true,
  // scope: "/app",
  // sw: "service-worker.js",
  //...
});

// your Next config is automatically typed!
module.exports = withPWA({
  // Next.js config
});
```

or if you prefer ESM:

```js
// title next.config.js
import withPWAInit from "@ducanh2912/next-pwa";

const withPWA = withPWAInit({
  dest: "public",
  // disable: process.env.NODE_ENV === "development",
  // register: true,
  // scope: "/app",
  // sw: "service-worker.js",
  //...
});

// your Next config is automatically typed!
export default withPWA({
  // Next.js config
});
```

## Available options

- `disable` — Disable PWA.

- `register` — Automatically register the service worker. Set this to `false` when you want to register the service worker yourself.

- `dest` — Set output directory for service worker. Relative to Next.js's root directory.

- `sw` — Customize the service worker's output's name.

- `cacheStartURL` — Turn on caching for start URL.

- `dynamicStartUrl` — If your start URL returns different HTML document under different states (such as logged in vs. not logged in), this
  should be set to true. Effective only when `cacheStartUrl` is set to `true`.

- `dynamicStartUrlRedirect` — If your start URL redirect to another route such as `/login`, it's recommended to setup this redirected URL for the
  best user experience. Effective when `dynamicStartUrl` is set to `true`.

- `publicExcludes` — An array of glob pattern strings to exclude files in the public folder from being precached.

- `buildExcludes` — One or more specifiers used to exclude assets from the precache manifest. This is interpreted following the same rules as Webpack's
  standard `exclude` option. Relative to `.next/static` or your custom build folder.

- `cacheOnFrontendNav` — Enable additional route caching when users navigate through pages with `next/link`.

- `scope` — URL scope for PWA. Defaults to `basePath` in `next.config.js`. Set to `/foo` so that paths under `/foo` are PWA while
  others are not.

- `customWorkerDir` — Change the directory `next-pwa` uses to look for a custom worker implementation to add to the service worker generated by `Workbox`.

- `reloadOnOnline` — Reload the app when it detects that it has gone back online.

- `extendDefaultRuntimeCaching` — Extend the default `runtimeCaching` array. Only effective when `runtimeCaching` is specified.

- `swcMinify` — Use [`swc`](https://swc.rs) to minify the custom worker, the fallback worker, and more.

### Experimental

- `aggressiveFrontEndNavCaching` — Cache every `<link rel="stylesheet" />` and `<script />` on frontend navigation. Requires `cacheOnFrontEndNav` to be enabled.

## Other options

`next-pwa` uses `workbox-webpack-plugin`, other options can be found in [workbox-webpack-plugin's documentation](https://developer.chrome.com/docs/workbox/modules/workbox-webpack-plugin)
for [GenerateSW](https://developer.chrome.com/docs/workbox/modules/workbox-webpack-plugin/#generatesw-plugin) and
[InjectManifest](https://developer.chrome.com/docs/workbox/modules/workbox-webpack-plugin/#injectmanifest-plugin).

To pass these options to `Workbox`, change your `next.config.js` like so:

```js
// title next.config.js
import withPWAInit from "@ducanh2912/next-pwa";

const withPWA = withPWAInit({
  // your other options,
  workboxOptions: {
    // workbox options go here
  },
});

export default withPWA({
  // your Next config
});
```

## Runtime caching

`next-pwa` has a default runtime caching array, see: [cache.ts](https://github.com/DuCanhGH/next-pwa/tree/master/packages/next-pwa/src/cache.ts)

If you want to have your own runtime caching rules, change your `next.config.js` like so:

```js
// title next.config.js
import withPWAInit from "@ducanh2912/next-pwa";

const withPWA = withPWAInit({
  // your other options,
  extendDefaultRuntimeCaching: true,
  workboxOptions: {
    runtimeCaching: [
      // your runtime caching array
    ],
  },
});

export default withPWA({
  // your Next config
});
```

Here is [the documentation on how to write a runtime caching array](https://developer.chrome.com/docs/workbox/reference/workbox-build/#type-RuntimeCaching),
including background sync, broadcast update, and more!
